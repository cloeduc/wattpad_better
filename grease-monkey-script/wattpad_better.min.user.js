// ==UserScript==
// @name         Better WattPad
// @namespace    http://cestdoncvrai.fr/
// @version      2.6
// @author       Alinoee
// @match        https://www.wattpad.com/*
// @include       *
// @grant        none
// ==/UserScript==

/*
  START CONFIGURATION
  */

  var ff_wp_better_config = {
  wattpad_enable_justify:true, // true -> justifie text on fiction // false -> default comportment
  wattpad_enable_select:true, // true -> enable selection on fiction // false -> default comportment
  wattpad_enable_big_comment:true, // true -> auto-resize comment and other text fields // false -> default comportment (use scroll bar)
  wattpad_enable_links:true, // true -> make all links on fiction clikable // false -> default comportment
  wattpad_enable_alinea:0, // 0 : no indentation (default comportement) // 1 : 1em indentation // 2 : 2em indentation ...etc.
  wattpad_enable_auto_broadcast:true, // true -> check "notify my user" // false -> default comportment
  wattpad_enable_local_storage_gestion:true,  // true display button to update notifications // false -> no button... no notifications !
  wattpad_enable_additional_links:true  // true display some additionals links to navigate on fiction
};
!function(a,b){if("function"==typeof define&&define.amd)define(["exports","module"],b);else if("undefined"!=typeof exports&&"undefined"!=typeof module)b(exports,module);else{var c={exports:{}};b(c.exports,c),a.autosize=c.exports}}(this,function(a,b){"use strict";function c(a){function b(){var b=window.getComputedStyle(a,null);o=b.overflowY,"vertical"===b.resize?a.style.resize="none":"both"===b.resize&&(a.style.resize="horizontal"),n="content-box"===b.boxSizing?-(parseFloat(b.paddingTop)+parseFloat(b.paddingBottom)):parseFloat(b.borderTopWidth)+parseFloat(b.borderBottomWidth),isNaN(n)&&(n=0),h()}function c(b){var c=a.style.width;a.style.width="0px",a.offsetWidth,a.style.width=c,o=b,m&&(a.style.overflowY=b),e()}function d(a){for(var b=[];a&&a.parentNode&&a.parentNode instanceof Element;)a.parentNode.scrollTop&&b.push({node:a.parentNode,scrollTop:a.parentNode.scrollTop}),a=a.parentNode;return b}function e(){var b=a.style.height,c=d(a),e=document.documentElement&&document.documentElement.scrollTop;a.style.height="auto";var f=a.scrollHeight+n;return 0===a.scrollHeight?void(a.style.height=b):(a.style.height=f+"px",p=a.clientWidth,c.forEach(function(a){a.node.scrollTop=a.scrollTop}),void(e&&(document.documentElement.scrollTop=e)))}function h(){var b=a.style.height;e();var d=window.getComputedStyle(a,null);if(d.height!==a.style.height?"visible"!==o&&c("visible"):"hidden"!==o&&c("hidden"),b!==a.style.height){var f=g("autosize:resized");a.dispatchEvent(f)}}var i=void 0===arguments[1]?{}:arguments[1],j=i.setOverflowX,k=void 0===j||j,l=i.setOverflowY,m=void 0===l||l;if(a&&a.nodeName&&"TEXTAREA"===a.nodeName&&!f.has(a)){var n=null,o=null,p=a.clientWidth,q=function(){a.clientWidth!==p&&h()},r=function(b){window.removeEventListener("resize",q,!1),a.removeEventListener("input",h,!1),a.removeEventListener("keyup",h,!1),a.removeEventListener("autosize:destroy",r,!1),a.removeEventListener("autosize:update",h,!1),f.delete(a),Object.keys(b).forEach(function(c){a.style[c]=b[c]})}.bind(a,{height:a.style.height,resize:a.style.resize,overflowY:a.style.overflowY,overflowX:a.style.overflowX,wordWrap:a.style.wordWrap});a.addEventListener("autosize:destroy",r,!1),"onpropertychange"in a&&"oninput"in a&&a.addEventListener("keyup",h,!1),window.addEventListener("resize",q,!1),a.addEventListener("input",h,!1),a.addEventListener("autosize:update",h,!1),f.add(a),k&&(a.style.overflowX="hidden",a.style.wordWrap="break-word"),b()}}function d(a){if(a&&a.nodeName&&"TEXTAREA"===a.nodeName){var b=g("autosize:destroy");a.dispatchEvent(b)}}function e(a){if(a&&a.nodeName&&"TEXTAREA"===a.nodeName){var b=g("autosize:update");a.dispatchEvent(b)}}var f="function"==typeof Set?new Set:function(){var a=[];return{has:function(b){return Boolean(a.indexOf(b)>-1)},add:function(b){a.push(b)},delete:function(b){a.splice(a.indexOf(b),1)}}}(),g=function(a){return new Event(a)};try{new Event("test")}catch(a){g=function(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!1),b}}var h=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(h=function(a){return a},h.destroy=function(a){return a},h.update=function(a){return a}):(h=function(a,b){return a&&Array.prototype.forEach.call(a.length?a:[a],function(a){return c(a,b)}),a},h.destroy=function(a){return a&&Array.prototype.forEach.call(a.length?a:[a],d),a},h.update=function(a){return a&&Array.prototype.forEach.call(a.length?a:[a],e),a}),b.exports=h}),!function(a){a.Observe={}}(jQuery),function(a,b){var c=function(b,c){c||(c=b,b=window.document);var d=[];return a(c).each(function(){for(var c=[],e=a(this),f=e.parent();f.length&&!e.is(b);f=f.parent()){var g=e.get(0).tagName.toLowerCase();c.push(g+":eq("+f.children(g).index(e)+")"),e=f}(f.length||e.is(b))&&d.push("> "+c.reverse().join(" > "))}),d.join(", ")};b.path={get:c,capture:function(b,d){d||(d=b,b=window.document);var e=[];return a(d).each(function(){var d=-1,f=this;if(this instanceof Text)for(var f=this.parentNode,g=f.childNodes,h=0;h<g.length;h++)if(g[h]===this){d=h;break}var i=c(b,f),j=a(b).is(f);e.push(function(b){return b=j?b:a(b).find(i),-1===d?b:b.contents()[d]})}),function(b){return b=b||window.document,e.reduce(function(a,c){return a.add(c(b))},a([]))}}}}(jQuery,jQuery.Observe),function(a,b){var c=function(b){this.original=a(b),this.root=this.original.clone(!1,!0)};c.prototype.find=function(a){return b.path.capture(this.original,a)(this.root)},b.Branch=c}(jQuery,jQuery.Observe),function(a,b){var c=function(a,b){var c={};return a.forEach(function(a){(a=b(a))&&(c[a[0]]=a[1])}),c},d=c("childList attributes characterData subtree attributeOldValue characterDataOldValue attributeFilter".split(" "),function(a){return[a.toLowerCase(),a]}),e=c(Object.keys(d),function(a){if("attributefilter"!==a)return[d[a],!0]}),f=c(["added","removed"],function(a){return[a.toLowerCase(),a]}),g=a([]),h=function(a){if("object"==typeof a)return a;a=a.split(/\s+/);var b={};return a.forEach(function(a){if(a=a.toLowerCase(),!d[a]&&!f[a])throw Error("Unknown option "+a);b[d[a]||f[a]]=!0}),b},i=function(a){return"["+Object.keys(a).sort().reduce(function(b,c){var d=a[c]&&"object"==typeof a[c]?i(a[c]):a[c];return b+"["+JSON.stringify(c)+":"+d+"]"},"")+"]"},j=window.MutationObserver||window.WebKitMutationObserver,k=function(b,c,d,e){this._originalOptions=a.extend({},c),c=a.extend({},c),this.attributeFilter=c.attributeFilter,delete c.attributeFilter,d&&(c.subtree=!0),c.childList&&(c.added=!0,c.removed=!0),(c.added||c.removed)&&(c.childList=!0),this.target=a(b),this.options=c,this.selector=d,this.handler=e};k.prototype.is=function(a,b,c){return i(this._originalOptions)===i(a)&&this.selector===b&&this.handler===c},k.prototype.match=function(b){var c=this.options,d=b.type;if(!this.options[d])return g;if(this.selector)switch(d){case"attributes":if(!this._matchAttributeFilter(b))break;case"characterData":return this._matchAttributesAndCharacterData(b);case"childList":if(b.addedNodes&&b.addedNodes.length&&c.added&&(d=this._matchAddedNodes(b),d.length))return d;if(b.removedNodes&&b.removedNodes.length&&c.removed)return this._matchRemovedNodes(b)}else{var e=b.target instanceof Text?a(b.target).parent():a(b.target);if(!c.subtree&&e.get(0)!==this.target.get(0))return g;switch(d){case"attributes":if(!this._matchAttributeFilter(b))break;case"characterData":return this.target;case"childList":if(b.addedNodes&&b.addedNodes.length&&c.added||b.removedNodes&&b.removedNodes.length&&c.removed)return this.target}}return g},k.prototype._matchAttributesAndCharacterData=function(a){return this._matchSelector(this.target,[a.target])},k.prototype._matchAddedNodes=function(a){return this._matchSelector(this.target,a.addedNodes)},k.prototype._matchRemovedNodes=function(c){var d=new b.Branch(this.target),e=Array.prototype.slice.call(c.removedNodes).map(function(a){return a.cloneNode(!0)});return c.previousSibling?d.find(c.previousSibling).after(e):c.nextSibling?d.find(c.nextSibling).before(e):(this.target===c.target?d.root:d.find(c.target)).empty().append(e),this._matchSelector(d.root,e).length?a(c.target):g},k.prototype._matchSelector=function(b,c){var d=b.find(this.selector);return c=Array.prototype.slice.call(c),d=d.filter(function(){var b=this;return c.some(function(c){return c instanceof Text?c.parentNode===b:c===b||a(c).has(b).length})})},k.prototype._matchAttributeFilter=function(a){return!this.attributeFilter||!this.attributeFilter.length||0<=this.attributeFilter.indexOf(a.attributeName)};var l=function(a){this.patterns=[],this._target=a,this._observer=null};l.prototype.observe=function(a,b,c){var d=this;this._observer?this._observer.disconnect():this._observer=new j(function(a){a.forEach(function(a){d.patterns.forEach(function(b){var c=b.match(a);c.length&&c.each(function(){b.handler.call(this,a)})})})}),this.patterns.push(new k(this._target,a,b,c)),this._observer.observe(this._target,this._collapseOptions())},l.prototype.disconnect=function(a,b,c){var d=this;this._observer&&(this.patterns.filter(function(d){return d.is(a,b,c)}).forEach(function(a){a=d.patterns.indexOf(a),d.patterns.splice(a,1)}),this.patterns.length||this._observer.disconnect())},l.prototype.disconnectAll=function(){this._observer&&(this.patterns=[],this._observer.disconnect())},l.prototype.pause=function(){this._observer&&this._observer.disconnect()},l.prototype.resume=function(){this._observer&&this._observer.observe(this._target,this._collapseOptions())},l.prototype._collapseOptions=function(){var b={};return this.patterns.forEach(function(c){var d=b.attributes&&b.attributeFilter;if(!d&&b.attributes||!c.attributeFilter)d&&c.options.attributes&&!c.attributeFilter&&delete b.attributeFilter;else{var e={},f=[];(b.attributeFilter||[]).concat(c.attributeFilter).forEach(function(a){e[a]||(f.push(a),e[a]=1)}),b.attributeFilter=f}a.extend(b,c.options)}),Object.keys(f).forEach(function(a){delete b[f[a]]}),b};var m=function(a){this.patterns=[],this._paused=!1,this._target=a,this._events={},this._handler=this._handler.bind(this)};m.prototype.NS=".jQueryObserve",m.prototype.observe=function(b,c,d){b=new k(this._target,b,c,d),a(this._target),b.options.childList&&(this._addEvent("DOMNodeInserted"),this._addEvent("DOMNodeRemoved")),b.options.attributes&&this._addEvent("DOMAttrModified"),b.options.characterData&&this._addEvent("DOMCharacerDataModified"),this.patterns.push(b)},m.prototype.disconnect=function(b,c,d){var e=a(this._target),f=this;this.patterns.filter(function(a){return a.is(b,c,d)}).forEach(function(a){a=f.patterns.indexOf(a),f.patterns.splice(a,1)});var g=this.patterns.reduce(function(a,b){return b.options.childList&&(a.DOMNodeInserted=!0,a.DOMNodeRemoved=!0),b.options.attributes&&(a.DOMAttrModified=!0),b.options.characterData&&(a.DOMCharacerDataModified=!0),a},{});Object.keys(this._events).forEach(function(a){g[a]||(delete f._events[a],e.off(a+f.NS,f._handler))})},m.prototype.disconnectAll=function(){var b,c=a(this._target);for(b in this._events)c.off(b+this.NS,this._handler);this._events={},this.patterns=[]},m.prototype.pause=function(){this._paused=!0},m.prototype.resume=function(){this._paused=!1},m.prototype._handler=function(b){if(!this._paused){var c={type:null,target:null,addedNodes:null,removedNodes:null,previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};switch(b.type){case"DOMAttrModified":c.type="attributes",c.target=b.target,c.attributeName=b.attrName,c.oldValue=b.prevValue;break;case"DOMCharacerDataModified":c.type="characterData",c.target=a(b.target).parent().get(0),c.attributeName=b.attrName,c.oldValue=b.prevValue;break;case"DOMNodeInserted":c.type="childList",c.target=b.relatedNode,c.addedNodes=[b.target],c.removedNodes=[];break;case"DOMNodeRemoved":c.type="childList",c.target=b.relatedNode,c.addedNodes=[],c.removedNodes=[b.target]}for(b=0;b<this.patterns.length;b++){var d=this.patterns[b],e=d.match(c);e.length&&e.each(function(){d.handler.call(this,c)})}}},m.prototype._addEvent=function(b){this._events[b]||(a(this._target).on(b+this.NS,this._handler),this._events[b]=!0)},b.Pattern=k,b.MutationObserver=l,b.DOMEventObserver=m,a.fn.observe=function(b,c,d){return c?d||(d=c,c=null):(d=b,b=e),this.each(function(){var e=a(this),f=e.data("observer");f||(f=j?new l(this):new m(this),e.data("observer",f)),b=h(b),f.observe(b,c,d)})},a.fn.disconnect=function(b,c,d){return b&&(c?d||(d=c,c=null):(d=b,b=e)),this.each(function(){var e=a(this),f=e.data("observer");f&&(b?(b=h(b),f.disconnect(b,c,d)):(f.disconnectAll(),e.removeData("observer")))})}}(jQuery,jQuery.Observe),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&y>=b};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;return d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&d!==-1?a[d]:void 0},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);h>g;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);e>d;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;c>g&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;b>d;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a||(A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length)},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(a){throw a.source=f,a}var h=function(a){return g.call(this,a,s)},i=b.variable||"obj";return h.source="function("+i+"){\n"+f+"}",h},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}.call(this);var $=unsafeWindow.jQuery,wpb_translations={en:{contentRemoveNotificationStorage:{message:"Load new notifications"},contentRemoveCommentsStorage:{message:"Load new comments"},contentPrevChapter:{message:"Back to previous chapter"}},fr:{contentRemoveNotificationsStorage:{message:"Charger les nouvelles notifications"},contentRemoveCommentsStorage:{message:"Charger les nouveaux commentaires"},contentPrevChapter:{message:"Relire le chapitre précédent"}}},wp_better_config={configKeys:["wattpad_enable_select","wattpad_enable_justify","wattpad_enable_big_comment","wattpad_enable_alinea","wattpad_enable_auto_broadcast","wattpad_enable_local_storage_gestion","wattpad_enable_additional_links","wattpad_enable_links"],getConfiguration:function(){navigator.sayswho.indexOf("Chrome")>-1?chrome.storage.sync.get(this.configKeys,function(a){wp_better_config=a}):navigator.sayswho.indexOf("Firefox")>-1&&(wp_better_config=ff_wp_better_config)}};$(document).ready(function(){wp_better_config.wattpad_enable_select&&wp_better.selection_enabled(),wp_better.initApp(),$("#app-container").observe("childlist",function(a){wp_better.initApp()}),navigator.sayswho.indexOf("Firefox")>-1&&wp_better.greaseMonkeyInitiation()});var wp_better={initApp:function(){wp_better.launch_complentary_observers(),$("body").hasClass("route-storyReading")&&(wp_better_config.wattpad_enable_select&&(wp_better.selection_enabled(),$("#parts-container-new").observe("childlist subtree","pre",function(a){wp_better.selection_enabled(),$("#parts-container-new").disconnect()})),wp_better_config.wattpad_enable_big_comment&&wp_better.autoresize("#comments textarea"),wp_better_config.wattpad_enable_local_storage_gestion&&wp_better.add_reload_comment_button(),wp_better_config.wattpad_enable_justify&&_.isUndefined($(".wem_justify")[0])&&wp_better.addStyleOnHead("wem_justify","#story-reading .page p {text-align:justify}"),wp_better_config.wattpad_enable_alinea>0&&_.isUndefined($(".wem_wattpad_enable_alinea")[0])&&wp_better.addStyleOnHead("wem_wattpad_enable_alinea","#story-reading .page p {text-indent:"+wp_better_config.wattpad_enable_alinea+"em!important;}"),wp_better_config.wattpad_enable_links&&wp_better.autolink($(".panel-reading p")),wp_better_config.wattpad_enable_additional_links&&wp_better.buttons_generation()),($("body").hasClass("route-userProfile")||window.location.href.indexOf("/user/cestdoncvrai/activity")>-1)&&(wp_better.add_profil_interraction(),$("#content").observe("childlist",function(a){$("#profile-messages").observe("childlist subtree",function(a){wp_better.add_profil_interraction(),$("#profile-messages").disconnect()})})),$("body").hasClass("route-notifications")&&wp_better_config.wattpad_enable_local_storage_gestion&&wp_better.cleanLocalStorage("notifications"),window.location.href.indexOf("www.wattpad.com/user_inbox")>-1&&wp_better.autoresize("textarea#comment")},launch_complentary_observers:function(){$("#comments").observe("childlist subtree",".message",function(a){wp_better_config.wattpad_enable_big_comment&&wp_better.autoresize("#comments textarea"),wp_better_config.wattpad_enable_local_storage_gestion&&wp_better.add_reload_comment_button()}),$("#inline-comments-modal").observe("childlist subtree",".message",function(a){wp_better_config.wattpad_enable_big_comment&&wp_better.autoresize("textarea"),wp_better_config.wattpad_enable_select&&wp_better.selection_enabled()})},add_profil_interraction:function(a){if(wp_better_config.wattpad_enable_big_comment&&(wp_better.autoresize(".message textarea"),$("#profile-messages .collection").observe("childlist",function(a){wp_better.autoresize(".message textarea")})),wp_better_config.wattpad_enable_auto_broadcast){var b=$(".broadcast-checkbox");b.length>0&&b[0].setAttribute("checked",!0)}},add_reload_comment_button:function(){_.isUndefined($("#wb_reload_button")[0])&&($("#comments").prepend('<button id="wb_reload_button" class="btn">'+wp_better.translate("__MSG_contentRemoveCommentsStorage_")+"</button>"),$("#wb_reload_button").on("click",function(){wp_better.cleanLocalStorage("comments"),window.location.reload()}))},add_interline_comments_button:function(a){$.ajax({url:a,dataType:"json"}).done(function(a){if(!_.isUndefined(a.comments))for(c in a.comments)if(null!=a.comments[c].paragraphId)return _.isUndefined($("#load_underline_comments")[0])&&$("#comments").prepend('<button id="load_underline_comments" class="btn right">Placer les commentaires d\'interligne</button>'),
$("#load_underline_comments").on("click",function(){if(!$(this).attr("isLoad")){var a=$($("#parts-container-new article.story-part")[0]).attr("data-part-id");wp_better.add_interline_comments("https://api.wattpad.com/v4/parts/"+a+"/comments"),$(this).attr("isLoad",!0),$(this).hide()}}),!0;_.isUndefined(a.nextUrl)||wp_better.add_interline_comments_button(a.nextUrl)})},add_interline_comments:function(a){$.ajax({url:a,dataType:"json"}).done(function(a){if(!_.isUndefined(a.comments)){for(c in a.comments)if(null!=a.comments[c].paragraphId){var b=a.comments[c],d=$("p[data-p-id="+b.paragraphId+"]").html(),e='<span class="bw_overline">',f='<span style="font-size:10px;" aria-hidden="true" class="fa fa-circle-filled fa-wp-grey bw_comment_marker"></span><span class="bw_comment_contenair">',g='<span class="bw_comment_on_text"><strong>'+b.author.name.strip_html()+" : </strong>"+b.body.strip_html()+"</span>",h="</span></span>";if(!_.isUndefined(d)){if(d.indexOf('<span class="bw_overline">')>-1){var i=d.indexOf('<span class="bw_comment_contenair">')+'<span class="bw_comment_contenair">'.length;d=d.insertAt(i,g)}else d.indexOf("data-media-type")>-1?d.prepend(e+f+g+h):d.indexOf("<b>")>-1||d.indexOf("<br")>-1||d.indexOf("<img")>-1?d=e+d+f+g+h:(d=d.insertAt(b.startPosition,e),d=d.insertAt(b.endPosition,f+g+h));$("p[data-p-id="+b.paragraphId.strip_html()+"]").html(d)}}$("span.bw_comment_marker").off("click").on("click",function(a){a.preventDefault(),$(this).parent().find("span.bw_comment_contenair").toggle(),$(this).parent().toggleClass("bw_overline_hover")})}_.isUndefined(a.nextUrl)||wp_better.add_interline_comments(a.nextUrl)})},buttons_generation:function(){var a=$("#funbar-story li.active").prev().children("a:first").attr("href"),b=$("#funbar-story li.active").prev().children("a:first").html(),c=$("#funbar-story li.active").next().children("a:first").attr("href"),d=$("#funbar-story li.active").next().children("a:first").html(),e="<div id='topFictionNavigation' class='navigationOnFiction'>";if(_.isUndefined(b)||(e=e+"<a href='"+a+"' class='on-navigate prevlink'><span style='font-size:16px;' aria-hidden='true' class='fa fa-left fa-wp-darkgrey next-up-icon pull-left'></span><div class='next-up-title'><span>"+b+"</span></div></a>"),_.isUndefined(d)||(e=e+"<a href='"+c+"' class='on-navigate nextlink'><span style='font-size:16px;' aria-hidden='true' class='fa fa-right fa-wp-darkgrey next-up-icon pull-right'></span><div class='next-up-title'><span>"+d+"</span></div></a>"),e+="</div>",!_.isUndefined(a))var f='<a class="on-navigate" href="'+a+'"><div class="orange bw_links_grey"><div class="next-up prev-part"><span>'+wp_better.translate("__MSG_contentPrevChapter_")+'</span><span class="fa fa-left fa-wp-white prev-up-icon" aria-hidden="true" style="font-size:16px;"></span></div></div></a>';_.isUndefined($(".prev-up-icon")[0])&&$($(".part-navigation")[0]).append(f),_.isUndefined($("#topFictionNavigation")[0])&&$($("header.panel-reading")[0]).append(e)},greaseMonkeyInitiation:function(){this.addStyleOnHead("ff","#wb_reload_button{margin-bottom:10px;background:#F89B33;color:#fff}.navigationOnFiction{border-top:1px solid #ededed;border-bottom:1px solid #ededed;display:block;font-size:14px;font-weight:600;color:#717171;line-height:24px;width:80%;margin:auto;position:relative}#topFictionNavigation .next-up-icon,#topFictionNavigation .next-up-title{line-height:50px}#topFictionNavigation .next-up-title{padding:0 30px}#topFictionNavigation a{display:block;color:#717171}#topFictionNavigation a:hover{background-color:#ededed;text-decoration:none}#topFictionNavigation .prevlink{text-align:left;border-bottom:1px solid #ededed}#topFictionNavigation .nextlink{text-align:right}.navigationOnFiction .bw_links span{color:#717171;font-size:14px;padding-top:0}.part-title{margin-bottom:10px}.navigationOnFiction .bw_links{position:absolute;display:flex;width:auto;color:#717171;top:10px}div.meta{border-bottom:none!important}.bw_links .fa-right{position:absolute;right:0;top:4px}.bw_links .fa-left{position:absolute;left:0;top:4px}.bw_links_left .next-up-title{text-align:left!important;margin-left:20px}.bw_bottom_links,.bw_links_right{text-align:right}.bw_links_right .next-up-title{margin-right:20px}.bw_links_right{border-top:none!important;right:0}#story-reading #parts-container-new footer .orange.bw_links_grey{color:#444!important;background-color:#DDD;border-color:#DDD}.bw_links_left{left:0}.bw_bottom_links .next-up-title{text-align:right;width:97%}.prev-up-icon{position:absolute;left:-14px;top:16px}.bw_comment_contenair,.bw_comment_marker{position:absolute;left:100%;line-height:15px}.next-up-icon{right:-14px}.part-navigation .orange{margin-bottom:5px}.bw_comment_contenair{font-size:.8em;color:grey;font-style:italic;width:50%;padding:10px 10px 30px;display:none;z-index:100;background:#fff}.bw_overline_hover{background-color:#eee}.bw_comment_marker{cursor:pointer;padding-left:15px;z-index:110}.bw_comment_on_text{display:block}")},selection_enabled:function(){$(".page").bind("copy",function(a){a.stopPropagation()}),$(".page").bind("contextmenu",function(a){a.stopPropagation()});for(var a=$(".panel-reading"),b=0;b<a.length;b++)a[b].style.MozUserSelect="text",a[b].style.WebkitUserSelect="text",a[b].style.MsUserSelect="text";$("#inline-comments-modal").bind("copy",function(a){a.stopPropagation()}),$("#inline-comments-modal").bind("contextmenu",function(a){a.stopPropagation()});for(var a=$(".comments-modal-body"),b=0;b<a.length;b++)a[b].style.MozUserSelect="text",a[b].style.WebkitUserSelect="text",a[b].style.MsUserSelect="text"},autoresize:function(a){autosize($(a))},addStyleOnHead:function(a,b){var c=document.createElement("style"),d=document.createTextNode(b);c.setAttribute("id",a),c.appendChild(d),document.getElementsByTagName("head")[0].appendChild(c)},cleanLocalStorage:function(a){for(var b=0,c=localStorage.length;b<c;++b)null!=localStorage.getItem(localStorage.key(b))&&localStorage.key(b).indexOf(a)>-1&&localStorage.removeItem(localStorage.key(b))},autolink:function(a){var b=/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi;a.each(function(){"header"!=$(this).prop("tagName")&&"footer"!=$(this).prop("tagName")&&$(this).html(wp_better.urlify($(this).html(),b))})},urlify:function(a,b){var c=new RegExp(b);if(a.match(c)){var d=/href="([^\'\"]+)/gi,e=/src="([^\'\"]+)/gi;if(!a.match(d)&&!a.match(e))return a.replace(c,function(a){return"<a target='_blank' href='"+a.replace("&nbsp","").trim()+"'>"+a+"</a>"})}return a},translate:function(a){var b=new RegExp(/(__MSG_)[^<]*(_)/g);return navigator.sayswho.indexOf("Chrome")>-1?a.match(b)?a.replace(b,function(a){var b=a.substring(0,a.length-1).replace("__MSG_","");return chrome.i18n.getMessage(b)?chrome.i18n.getMessage(b):"Error on translation data (WattPad Better Plugin). Please reload the page and contact plugin author if this bug persist"}):a:navigator.sayswho.indexOf("Firefox")>-1&&!_.isUndefined(wpb_translations)&&a.match(b)?a.replace(b,function(a){var b=a.substring(0,a.length-1).replace("__MSG_",""),c=window.navigator.language;return wpb_translations[c]?wpb_translations[c][b]?wpb_translations[c][b].message:"undefined":wpb_translations.en[b]?wpb_translations.en[b].message:"undefined"}):void 0}};String.prototype.insertAt=function(a,b){return this.substr(0,a)+b+this.substr(a)},String.prototype.strip_html=function(){return this.replace(/(<([^>]+)>)/gi,"")},navigator.sayswho=function(){var b,a=navigator.userAgent,c=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(b=/\brv[ :]+(\d+)/g.exec(a)||[],"IE "+(b[1]||"")):"Chrome"===c[1]&&(b=a.match(/\b(OPR|Edge)\/(\d+)/),null!=b)?b.slice(1).join(" ").replace("OPR","Opera"):(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(b=a.match(/version\/(\d+)/i))&&c.splice(1,1,b[1]),c.join(" "))}(),$.extend(wp_better_config),$.extend(wp_better),wp_better_config.getConfiguration();
